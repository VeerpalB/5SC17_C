
{% extends 'main.html' %}
{% load static %}
{% block content %}

<form method="post" action="{% url 'progress_name' %}">
  {% csrf_token %}

  {% comment %} Fun {% endcomment %}
  <div class="tab">
    <h2 style="text-align: center;">Fun</h2>
    <div class="container">
      <div class="container-section">
        <h3>Select Trend</h3>
        <div class="select-box button1" data-group="group1" data-value="Red">Boooooooring..</div>
        <div class="select-box button2" data-group="group1" data-value="Yellow">Some challenges exist, but progress is still acceptable.</div>
        <div class="select-box button3" data-group="group1" data-value="Green">We love going to work and have great fun working together!</div>
      </div>
      <div class="container-section">
        <h3>Select State</h3>
        <div class="select-box button1" data-group="group2" data-value="worse">Getting Worse</div>
        <div class="select-box button2" data-group="group2" data-value="stable">Stable</div>
        <div class="select-box button3" data-group="group2" data-value="improving">Improving</div>
      </div>
    </div>
    <div class="container">
      <label for="note">Notes:</label>
      <textarea name="note[]" class="note-textarea" style="width: 100%;"></textarea>
    </div>
    <input type="hidden" name="category[]" value="Fun">
    <input type="hidden" name="trend[]" class="trend-input">
    <input type="hidden" name="state[]" class="state-input">
  </div>

  {% comment %} Delivering Value {% endcomment %}
  <div class="tab">
    <h2 style="text-align: center;">Delivering Value</h2>
    <div class="container">
      <div class="container-section">
        <h3>Select Trend</h3>
        <div class="select-box button1" data-group="group1" data-value="Red">We deliver crap. We feel ashamed to deliver it. Our stakeholders hate us.</div>
        <div class="select-box button2" data-group="group1" data-value="Yellow">Some challenges exist, but progress is still acceptable.</div>
        <div class="select-box button3" data-group="group1" data-value="Green">We deliver great stuff! We're proud of it and our stakeholders are really happy.</div>
      </div>
      <div class="container-section">
        <h3>Select State</h3>
        <div class="select-box button1" data-group="group2" data-value="worse">Getting Worse</div>
        <div class="select-box button2" data-group="group2" data-value="stable">Stable</div>
        <div class="select-box button3" data-group="group2" data-value="improving">Improving</div>
      </div>
    </div>
    <div class="container">
      <label for="note">Notes:</label>
      <textarea name="note[]" class="note-textarea" style="width: 100%;"></textarea>
    </div>
    <input type="hidden" name="category[]" value="Delivering Value">
    <input type="hidden" name="trend[]" class="trend-input">
    <input type="hidden" name="state[]" class="state-input">
  </div>

  {% comment %} Easy to Release {% endcomment %}
  <div class="tab">
    <h2 style="text-align: center;">Easy to Release</h2>
    <div class="container">
      <div class="container-section">
        <h3>Select Trend</h3>
        <div class="select-box button1" data-group="group1" data-value="Red">Releasing is risky, painful, lots of manual work and takes forever.</div>
        <div class="select-box button2" data-group="group1" data-value="Yellow">Some challenges exist, but progress is still acceptable.</div>
        <div class="select-box button3" data-group="group1" data-value="Green">Releasing is simple, safe, painless and mostly automated.</div>
      </div>
      <div class="container-section">
        <h3>Select State</h3>
        <div class="select-box button1" data-group="group2" data-value="worse">Getting Worse</div>
        <div class="select-box button2" data-group="group2" data-value="stable">Stable</div>
        <div class="select-box button3" data-group="group2" data-value="improving">Improving</div>
      </div>
    </div>
    <div class="container">
      <label for="note">Notes:</label>
      <textarea name="note[]" class="note-textarea" style="width: 100%;"></textarea>
    </div>
    <input type="hidden" name="category[]" value="Easy to Release">
    <input type="hidden" name="trend[]" class="trend-input">
    <input type="hidden" name="state[]" class="state-input">
  </div>

  {% comment %} Pawns or Players {% endcomment %}
  <div class="tab">
    <h2 style="text-align: center;">Pawns or Players</h2>
    <div class="container">
      <div class="container-section">
        <h3>Select Trend</h3>
        <div class="select-box button1" data-group="group1" data-value="Red">We are just pawns in a game of chess with no influence over what we build or how we build it.</div>
        <div class="select-box button2" data-group="group1" data-value="Yellow">Some challenges exist, but progress is still acceptable.</div>
        <div class="select-box button3" data-group="group1" data-value="Green">We are in control of our own destiny! We decide what to build and how to build it.</div>
      </div>
      <div class="container-section">
        <h3>Select State</h3>
        <div class="select-box button1" data-group="group2" data-value="worse">Getting Worse</div>
        <div class="select-box button2" data-group="group2" data-value="stable">Stable</div>
        <div class="select-box button3" data-group="group2" data-value="improving">Improving</div>
      </div>
    </div>
    <div class="container">
      <label for="note">Notes:</label>
      <textarea name="note[]" class="note-textarea" style="width: 100%;"></textarea>
    </div>
    <input type="hidden" name="category[]" value="Pawns or Players">
    <input type="hidden" name="trend[]" class="trend-input">
    <input type="hidden" name="state[]" class="state-input">
  </div>

  {% comment %} Health of Codebase {% endcomment %}
  <div class="tab">
    <h2 style="text-align: center;">Health of Codebase</h2>
    <div class="container">
      <div class="container-section">
        <h3>Select Trend</h3>
        <div class="select-box button1" data-group="group1" data-value="Red">Our code is a pile of dung and technical debt is raging out of control.</div>
        <div class="select-box button2" data-group="group1" data-value="Yellow">Some challenges exist, but progress is still acceptable.</div>
        <div class="select-box button3" data-group="group1" data-value="Green">We're proud of the quality of our code! It is clean, easy to read, and has great test coverage.</div>
      </div>
      <div class="container-section">
        <h3>Select State</h3>
        <div class="select-box button1" data-group="group2" data-value="worse">Getting Worse</div>
        <div class="select-box button2" data-group="group2" data-value="stable">Stable</div>
        <div class="select-box button3" data-group="group2" data-value="improving">Improving</div>
      </div>
    </div>
    <div class="container">
      <label for="note">Notes:</label>
      <textarea name="note[]" class="note-textarea" style="width: 100%;"></textarea>
    </div>
    <input type="hidden" name="category[]" value="Health of Codebase">
    <input type="hidden" name="trend[]" class="trend-input">
    <input type="hidden" name="state[]" class="state-input">
  </div>

  <div style="overflow:auto;">
    <div style="float:right;">
       <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
          <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
        </div>
      </div>
      
      <button type="submit">Submit Vote</button>
  
</form>

<script src="{% static 'healthcheck/voting.js' %}"></script>
<script>
document.querySelectorAll('.select-box').forEach(box => {
  box.addEventListener('click', () => {
    const group = box.getAttribute('data-group');
    const value = box.getAttribute('data-value');
    const parentTab = box.closest('.tab');
    parentTab.querySelectorAll(`.select-box[data-group="${group}"]`).forEach(b => b.classList.remove('selected'));
    box.classList.add('selected');
    if (group === 'group1') {
      parentTab.querySelector('.trend-input').value = value;
    } else if (group === 'group2') {
      parentTab.querySelector('.state-input').value = value;
    }
  });
});
</script>

{% endblock %}
